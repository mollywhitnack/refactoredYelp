"use strict";var app=angular.module("myApp",["ui.router","satellizer","ngFileUpload"]);app.config(["$authProvider",function(e){e.loginUrl="api/users/login",e.signupUrl="api/users/signup",e.facebook({clientId:"255060128209165",url:"/api/users/facebook"})}]),app.config(["$stateProvider","$urlRouterProvider",function(e,o){e.state("home",{url:"/",templateUrl:"/html/home.html"}).state("login",{url:"/login",templateUrl:"/html/login.html",controller:"loginCtrl"}).state("register",{url:"/register",templateUrl:"/html/register.html",controller:"registerCtrl"}).state("profile",{url:"/profile/:userId",templateUrl:"/html/profile.html",controller:"profileCtrl",resolve:{Profile:["User",function(e){return e.profile()}],ProfileByID:["User","$stateParams",function(e,o){return e.getProfile(o.userId)}]}}).state("users",{url:"/users",templateUrl:"/html/users.html",controller:"usersCtrl"}).state("business",{url:"/business",templateUrl:"/html/business.html",controller:"businessCtrl",resolve:{Profile:["User",function(e){return e.profile()}]}}).state("showBusiness",{url:"/business/:businessId",templateUrl:"html/showbusiness.html",controller:"showbusinessCtrl",resolve:{Profile:["User",function(e){return e.profile()}]}}),o.otherwise("/")}]);var app=angular.module("myApp");app.controller("businessCtrl",["$scope","User","$rootScope","Business","Profile",function(e,o,s,n,t){console.log("businessCtrl"),e.businesses=[],console.log("Profile:",t);var r=t.favorites;e.searchBusiness=function(){console.log("$scope.newItem.searchParams",e.newItem.searchParams),n.searchYelp(e.newItem.searchParams).then(function(o){console.log("res from search businsess:",o);for(var s=0;s<r.length;s++)console.log(o.id," vs ",r[s]),o.id===r[s]&&(e.toggleFave=!0);e.businesses.push(o)})["catch"](function(e){console.log("err in businessCtrl: ",e)})},e.searchBusiness2=function(){console.log("search");var o={};e.newItem.location&&(o.location=e.newItem.location),e.newItem.term&&(o.term=e.newItem.term),console.log("searchBy:",o),n.searchCatagories(o).then(function(o){console.log("res from search businsess:",o.businesses),e.toggleFave=new Array(o.businesses.length);for(var s=0;s<o.businesses.length;s++)for(var n=0;n<r.length;n++)console.log(),o.businesses[s].id===r[n]?(console.log(o.businesses[s].id," vs ",r[n]),e.toggleFave[s]=1):e.toggleFave[s]=0;e.businesses=o.businesses})["catch"](function(e){console.log("err in businessCtrl: ",e)})},e.favorite=function(s){console.log("index: ",s),e.toggleFave[s]=!e.toggleFave[s],console.log("$scope.businesses[index].id",e.businesses[s].id),o.addFavoriteToUser(t._id,e.businesses[s].id).then(n.addFavorite(e.businesses[s],t._id)).then(function(e){console.log("res:",e)})["catch"](function(e){console.log("err in businessCtrl: ",e)}),console.log("$scope.businesses[index]:",e.businesses[s].id)},e.unFavorite=function(s){e.toggleFave[s]=!e.toggleFave[s],console.log("$scope.businesses[index].id",e.businesses[s].id),o.removeFavoritefromUser(t._id,e.businesses[s].id).then(function(e){console.log("res:",e)})["catch"](function(e){console.log("err in businessCtrl: ",e)}),console.log("$scope.businesses[index]:",e.businesses[s].id)}}]);var app=angular.module("myApp");app.controller("imageCtrl",["$scope","Upload","Profile","$rootScope",function(e,o,s,n){console.log("image ctrl"),n.currentUser=s,e.submit=function(){console.log("submit"),console.log("$scope.file:",e.file),o.upload({url:"/api/images",data:{photo:e.file,user:n.currentUser._id}}).then(function(o){console.log("res: ",o),e.savedImage=o.data})["catch"](function(e){console.log("err:",e)})}}]);var app=angular.module("myApp");app.controller("loginCtrl",["$scope","$state","$auth","$rootScope",function(e,o,s,n){console.log("loginCtrl!"),e.login=function(){s.login(e.user).then(function(e){console.log("res: ",e),o.go("profile")})["catch"](function(e){console.log("err:",e)})}}]);var app=angular.module("myApp");app.controller("mainCtrl",["$scope","$state","$auth","$rootScope",function(e,o,s,n){console.log("mainCtrl!"),n.currentUser,e.isAuthenticated=function(){return s.isAuthenticated()},e.logout=function(){s.logout(),o.go("home")},e.authenticate=function(e){s.authenticate(e).then(function(e){o.go("home")})["catch"](function(e){console.log("err:",e)})}}]);var app=angular.module("myApp");app.controller("profileCtrl",["$scope","Profile","ProfileByID","$state","User","$rootScope","WallPost",function(e,o,s,n,t,r,l){console.log("profileCtrl!"),r.currentUser=o,e.user=s||o,l.getWallPosts(e.user._id).then(function(o){e.userWallposts=o}),console.log("user:",e.user),console.log("curruser:",r.currentUser),e.showdisplayNameForm=function(){console.log("show form"),e.displayNameForm=!0},e.updatedisplayName=function(){e.displayNameForm=!1,e.user.displayName=e.newItem.displayName,t.updateProfile(e.user._id,e.newItem).then(function(o){console.log("profile:",o),e.newItem.displayName=""})["catch"](function(e){console.log("err:",e)})},e.canceldisplayName=function(){e.usernameForm=!0,e.newItem.displayName=""},e.showPictureForm=function(){console.log("show form"),e.photoForm=!0},e.updatePicture=function(){e.photoForm=!1,console.log("$state.current: ",n.current),e.user.profileImage=e.newItem.profileImage,console.log("$scope.newItem:",e.newItem),t.updateProfile(e.user._id,e.newItem).then(function(o){console.log("profile:",o),e.newItem.profileImage=""})["catch"](function(e){console.log("err:",e)})},e.cancelPhotoUrl=function(){e.photoForm=!0,e.newItem.photoUrl=""},e.deleteAccount=function(e){console.log(e._id),t.deleteAccount(e._id).then()["catch"](function(e){console.log("err: ",e)})},e.submitMessage=function(){var o={to:e.user,from:r.currentUser._id,fromName:r.currentUser.displayName,text:e.newItem.text,createdAt:"add moment"};console.log("post obj:",o),l.addWallPost(o).then(function(e){console.log("wallpost:",e),t.addWallPostToUser(s._id,e._id)}).then(n.go(n.$current,null,{reload:!0}))["catch"](function(e){console.log("err: ",e)})}}]);var app=angular.module("myApp");app.controller("registerCtrl",["$scope","$state","$auth",function(e,o,s){console.log("registerCtrl!"),e.register=function(){e.user.password!==e.user.password2?(e.user.password=null,e.user.password2=null,alert("Passwords must match!")):s.signup(e.user).then(function(e){console.log("res: ",e),o.go("login")})["catch"](function(e){console.log("err:",e)})}}]);var app=angular.module("myApp");app.controller("showbusinessCtrl",["$scope","$stateParams","Business","Profile","User",function(e,o,s,n,t){console.log("showbusinessCtrl!"),e.showButton=!1,e.singletoggleFave=!1;var r=n.favorites,l=o;console.log("businessId",l.businessId),s.searchYelp(l.businessId).then(function(o){console.log("res:",o),e.business=o,console.log("redID:",o.id),console.log("faves",r),e.showButton=!0;for(var s=0;s<r.length;s++)console.log(r[s]," vs ",o.id),r[s]===o.id&&(e.singletoggleFave=!0)})["catch"](function(e){console.log("err in businessCtrl: ",e)}),e.favorite=function(){e.singletoggleFave=!e.singletoggleFave,console.log("$scope.business.id",e.business.id),t.addFavoriteToUser(n._id,e.business.id).then(s.addFavorite(e.business,n._id)).then(function(e){console.log("res:",e)})["catch"](function(e){console.log("err in businessCtrl: ",e)}),console.log("$scope.business:",e.business.id)},e.unFavorite=function(){e.singletoggleFave=!e.singletoggleFave,console.log("$scope.businesses[index].id",e.business.id),t.removeFavoritefromUser(n._id,e.business.id).then(function(e){console.log("res:",e)})["catch"](function(e){console.log("err in businessCtrl: ",e)}),console.log("$scope.businesses[index]:",e.business.id)}}]);var app=angular.module("myApp");app.controller("usersCtrl",["$scope","$$state","$state","User",function(e,o,s,n){console.log("usersCtrl!");var t=n.getAll();console.log("userPromise:",t),t.then(function(o){console.log(o.data),e.userFeed=o.data})}]);var app=angular.module("myApp");app.service("Business",["$http","$q",function(e,o){this.getMap=function(s){return console.log("cords in service:",s),e.get("/api/businesses/map",s).then(function(e){return console.log("res.data in services:",e.data),console.log("res in services:",e),o.resolve(e.data)})["catch"](function(e){console.log("err:",e)})},this.searchYelp=function(s){return console.log("search: ",s),e.get("/api/businesses/yelp/"+s).then(function(e){return console.log("res.data in services:",e.data),console.log("res in services:",e),o.resolve(e.data)})["catch"](function(e){console.log("err:",e)})},this.searchCatagories=function(s){return console.log("inputs",s),e.post("/api/businesses/yelp/yelpCatagories",s).then(function(e){return console.log("res.data in services:",e.data),console.log("res in services:",e),o.resolve(e.data)})["catch"](function(e){console.log("err:",e)})},this.addFavorite=function(s,n){return console.log("businessObj:",s),e.post("/api/businesses/"+n,s).then(function(e){return console.log("res ln 24 business services:",e),o.resolve(e)})["catch"](function(e){console.log("err:",e)})}}]);var app=angular.module("myApp");app.service("image",["$http","$q",function(e,o){this.getAll=function(){return e.get("/api/cruds")},this.getById=function(o){return e.get("/api/cruds/"+o)},this.addCrud=function(s){return e.post("/api/cruds",s).then(function(e){return o.resolve(e.data)})["catch"](function(e){console.log("err:",e)})},this.deleteCrud=function(s){return e["delete"]("/api/cruds/"+s).then(function(){return o.resolve()})["catch"](function(e){console.log("err:",e)})},this.updateCrud=function(s,n){return e.put("/api/cruds/"+s,n).then(function(e){return o.resolve(n)})["catch"](function(e){console.log("err:",e)})}}]);var app=angular.module("myApp");app.service("User",["$http","$q",function(e,o){this.profile=function(){return e.get("/api/users/profile").then(function(e){return o.resolve(e.data)})},this.getProfile=function(s){return e.get("/api/users/profile/"+s).then(function(e){return o.resolve(e.data)})["catch"](function(e){console.log("err:",e)})},this.getAll=function(){return e.get("/api/users")},this.updateProfile=function(s,n){return console.log("here"),console.log(s," ",n),e.put("/api/users/profile/"+s,n).then(function(e){return o.resolve()})["catch"](function(e){console.log("err:",e)})},this.deleteAccount=function(s){return e["delete"]("/api/users/profile/"+s).then(function(e){return o.resolve()})["catch"](function(e){console.log("err:",e)})},this.addFavoriteToUser=function(s,n){return e.put("/api/users/profile/"+s+"/add/"+n).then(function(e){return o.resolve()})["catch"](function(e){console.log("err:",e)})},this.removeFavoritefromUser=function(s,n){return console.log("remove Favorite","id:",s,"yelpId",n),e.put("/api/users/profile/"+s+"/remove/"+n).then(function(e){return console.log("res ln 53:",e),o.resolve()})["catch"](function(e){console.log("err:",e)})}}]);var app=angular.module("myApp");app.service("WallPost",["$http","$q",function(e,o){this.addWallPost=function(s){return console.log("in add wallpost: ",s),e.post("/api/wallposts",s).then(function(e){return o.resolve(e.data)})["catch"](function(e){console.log("err:",e)})},this.getWallPosts=function(s){return e.get("/api/wallposts/"+s).then(function(e){return o.resolve(e.data)})["catch"](function(e){console.log("err: ",e)})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbnRyb2xsZXJzL2J1c2luZXNzQ3RybC5qcyIsImNvbnRyb2xsZXJzL2ltYWdlQ3RybC5qcyIsImNvbnRyb2xsZXJzL2xvZ2luQ3RybC5qcyIsImNvbnRyb2xsZXJzL21haW5DdHJsLmpzIiwiY29udHJvbGxlcnMvcHJvZmlsZUN0cmwuanMiLCJjb250cm9sbGVycy9yZWdpc3RlckN0cmwuanMiLCJjb250cm9sbGVycy9zaG93YnVzaW5lc3NDdHJsLmpzIiwiY29udHJvbGxlcnMvdXNlcnNDdHJsLmpzIiwic2VydmljZXMvYnVzaW5lc3NzZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2ltYWdlc2VydmljZXMuanMiLCJzZXJ2aWNlcy91c2Vyc2VydmljZXMuanMiLCJzZXJ2aWNlcy93YWxscG9zdHNlcnZpY2VzLmpzIl0sIm5hbWVzIjpbImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkYXV0aFByb3ZpZGVyIiwibG9naW5VcmwiLCJzaWdudXBVcmwiLCJmYWNlYm9vayIsImNsaWVudElkIiwidXJsIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJzdGF0ZSIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsInJlc29sdmUiLCJQcm9maWxlIiwiVXNlciIsInByb2ZpbGUiLCJQcm9maWxlQnlJRCIsIiRzdGF0ZVBhcmFtcyIsImdldFByb2ZpbGUiLCJ1c2VySWQiLCJvdGhlcndpc2UiLCIkc2NvcGUiLCIkcm9vdFNjb3BlIiwiQnVzaW5lc3MiLCJjb25zb2xlIiwibG9nIiwiYnVzaW5lc3NlcyIsImZhdm9yaXRlcyIsInNlYXJjaEJ1c2luZXNzIiwibmV3SXRlbSIsInNlYXJjaFBhcmFtcyIsInNlYXJjaFllbHAiLCJ0aGVuIiwicmVzIiwiaSIsImxlbmd0aCIsImlkIiwidG9nZ2xlRmF2ZSIsInB1c2giLCJlcnIiLCJzZWFyY2hCdXNpbmVzczIiLCJzZWFyY2hCeSIsImxvY2F0aW9uIiwidGVybSIsInNlYXJjaENhdGFnb3JpZXMiLCJBcnJheSIsImsiLCJmYXZvcml0ZSIsImluZGV4IiwiYWRkRmF2b3JpdGVUb1VzZXIiLCJfaWQiLCJhZGRGYXZvcml0ZSIsInVuRmF2b3JpdGUiLCJyZW1vdmVGYXZvcml0ZWZyb21Vc2VyIiwiVXBsb2FkIiwiY3VycmVudFVzZXIiLCJzdWJtaXQiLCJmaWxlIiwidXBsb2FkIiwiZGF0YSIsInBob3RvIiwidXNlciIsInNhdmVkSW1hZ2UiLCIkc3RhdGUiLCIkYXV0aCIsImxvZ2luIiwiZ28iLCJpc0F1dGhlbnRpY2F0ZWQiLCJsb2dvdXQiLCJhdXRoZW50aWNhdGUiLCJwcm92aWRlciIsIldhbGxQb3N0IiwiZ2V0V2FsbFBvc3RzIiwidXNlcldhbGxwb3N0cyIsInNob3dkaXNwbGF5TmFtZUZvcm0iLCJkaXNwbGF5TmFtZUZvcm0iLCJ1cGRhdGVkaXNwbGF5TmFtZSIsImRpc3BsYXlOYW1lIiwidXBkYXRlUHJvZmlsZSIsImNhbmNlbGRpc3BsYXlOYW1lIiwidXNlcm5hbWVGb3JtIiwic2hvd1BpY3R1cmVGb3JtIiwicGhvdG9Gb3JtIiwidXBkYXRlUGljdHVyZSIsImN1cnJlbnQiLCJwcm9maWxlSW1hZ2UiLCJjYW5jZWxQaG90b1VybCIsInBob3RvVXJsIiwiZGVsZXRlQWNjb3VudCIsInN1Ym1pdE1lc3NhZ2UiLCJwb3N0T2JqIiwidG8iLCJmcm9tIiwiZnJvbU5hbWUiLCJ0ZXh0IiwiY3JlYXRlZEF0IiwiYWRkV2FsbFBvc3QiLCJ3YWxscG9zdCIsImFkZFdhbGxQb3N0VG9Vc2VyIiwiJGN1cnJlbnQiLCJyZWxvYWQiLCJyZWdpc3RlciIsInBhc3N3b3JkIiwicGFzc3dvcmQyIiwiYWxlcnQiLCJzaWdudXAiLCJzaG93QnV0dG9uIiwic2luZ2xldG9nZ2xlRmF2ZSIsImJ1c2luZXNzSWQiLCJidXNpbmVzcyIsIiQkc3RhdGUiLCJ1c2VyUHJvbWlzZSIsImdldEFsbCIsInJlc3VsdCIsInVzZXJGZWVkIiwic2VydmljZSIsIiRodHRwIiwiJHEiLCJ0aGlzIiwiZ2V0TWFwIiwiY29yZHMiLCJnZXQiLCJzZWFyY2giLCJpbnB1dHMiLCJwb3N0IiwiYnVzaW5lc3NPYmoiLCJnZXRCeUlkIiwiYWRkQ3J1ZCIsImNydWQiLCJkZWxldGVDcnVkIiwidXBkYXRlQ3J1ZCIsInB1dCIsInByb2ZpbGVPYmoiLCJ5ZWxwSWQiXSwibWFwcGluZ3MiOiJBQUFBLFlBRUEsSUFBSUEsS0FBTUMsUUFBUUMsT0FBTyxTQUFVLFlBQWEsYUFBYyxnQkFFOURGLEtBQUlHLFFBQUEsZ0JBQU8sU0FBU0MsR0FFbEJBLEVBQWNDLFNBQVcsa0JBQ3pCRCxFQUFjRSxVQUFZLG1CQUUxQkYsRUFBY0csVUFDWkMsU0FBVSxrQkFDVkMsSUFBSywyQkFLVFQsSUFBSUcsUUFBQSxpQkFBQSxxQkFBTyxTQUFTTyxFQUFnQkMsR0FFbENELEVBQ0dFLE1BQU0sUUFBVUgsSUFBSyxJQUFLSSxZQUFhLG9CQUN2Q0QsTUFBTSxTQUNMSCxJQUFLLFNBQ0xJLFlBQWEsbUJBQ2JDLFdBQVksY0FFYkYsTUFBTSxZQUNMSCxJQUFLLFlBQ0xJLFlBQWEsc0JBQ2JDLFdBQVksaUJBRWJGLE1BQU0sV0FDTEgsSUFBSyxtQkFDTEksWUFBYSxxQkFDYkMsV0FBWSxjQUNaQyxTQUNFQyxTQUFBLE9BQVMsU0FBU0MsR0FDaEIsTUFBT0EsR0FBS0MsWUFFZEMsYUFBQSxPQUFBLGVBQWEsU0FBU0YsRUFBTUcsR0FDMUIsTUFBT0gsR0FBS0ksV0FBV0QsRUFBYUUsYUFJekNWLE1BQU0sU0FDTEgsSUFBSyxTQUNMSSxZQUFhLG1CQUNiQyxXQUFZLGNBRWJGLE1BQU0sWUFDTEgsSUFBSyxZQUNMSSxZQUFhLHNCQUNiQyxXQUFZLGVBQ1pDLFNBQ0VDLFNBQUEsT0FBUyxTQUFTQyxHQUNoQixNQUFPQSxHQUFLQyxlQUlqQk4sTUFBTSxnQkFDTEgsSUFBSyx3QkFDTEksWUFBYSx5QkFDYkMsV0FBWSxtQkFDWkMsU0FDRUMsU0FBQSxPQUFTLFNBQVNDLEdBQ2hCLE1BQU9BLEdBQUtDLGVBS3BCUCxFQUFtQlksVUFBVSxPQ25FL0IsSUFB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UUFBUUMsT0FBTyxRQUV6QkYsS0FBSXNILFFBQVEsWUFBQSxRQUFBLEtBQVksU0FBU0MsRUFBT0MsR0FFcENDLEtBQUt0QixZQUFhLFNBQUNDLEdBRW5CLE1BREF6RSxTQUFRQyxJQUFJLG9CQUFxQndFLEdBQzFCbUIsRUFBTVEsS0FBTixpQkFBNkIzQixHQUNqQ2pFLEtBQUssU0FBQUMsR0FDSixNQUFPb0YsR0FBR3pHLFFBQVFxQixFQUFJMEIsUUFGbkJ5RCxTQUlFLFNBQUE3RSxHQUNMZixRQUFRQyxJQUFJLE9BQVFjLE1BS3hCK0UsS0FBSzlDLGFBQWUsU0FBQ3JELEdBQ3JCLE1BQU9pRyxHQUFNSyxJQUFOLGtCQUE0QnRHLEdBQ2hDYSxLQUFLLFNBQUFDLEdBQ0osTUFBT29GLEdBQUd6RyxRQUFRcUIsRUFBSTBCLFFBRm5CeUQsU0FJRSxTQUFBN0UsR0FDTGYsUUFBUUMsSUFBSSxRQUFTYyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbJ3VpLnJvdXRlcicsICdzYXRlbGxpemVyJywgJ25nRmlsZVVwbG9hZCddKTtcblxuYXBwLmNvbmZpZyhmdW5jdGlvbigkYXV0aFByb3ZpZGVyKSB7XG5cbiAgJGF1dGhQcm92aWRlci5sb2dpblVybCA9ICdhcGkvdXNlcnMvbG9naW4nO1xuICAkYXV0aFByb3ZpZGVyLnNpZ251cFVybCA9ICdhcGkvdXNlcnMvc2lnbnVwJztcblxuICAkYXV0aFByb3ZpZGVyLmZhY2Vib29rKHtcbiAgICBjbGllbnRJZDogJzI1NTA2MDEyODIwOTE2NScsXG4gICAgdXJsOiAnL2FwaS91c2Vycy9mYWNlYm9vaydcbiAgfSk7XG5cbn0pO1xuXG5hcHAuY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuICAkc3RhdGVQcm92aWRlclxuICAgIC5zdGF0ZSgnaG9tZScsIHsgdXJsOiAnLycsIHRlbXBsYXRlVXJsOiAnL2h0bWwvaG9tZS5odG1sJyB9KVxuICAgIC5zdGF0ZSgnbG9naW4nLCB7XG4gICAgICB1cmw6ICcvbG9naW4nLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvaHRtbC9sb2dpbi5odG1sJyxcbiAgICAgIGNvbnRyb2xsZXI6ICdsb2dpbkN0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ3JlZ2lzdGVyJywge1xuICAgICAgdXJsOiAnL3JlZ2lzdGVyJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2h0bWwvcmVnaXN0ZXIuaHRtbCcsXG4gICAgICBjb250cm9sbGVyOiAncmVnaXN0ZXJDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdwcm9maWxlJywge1xuICAgICAgdXJsOiAnL3Byb2ZpbGUvOnVzZXJJZCcsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9odG1sL3Byb2ZpbGUuaHRtbCcsXG4gICAgICBjb250cm9sbGVyOiAncHJvZmlsZUN0cmwnLFxuICAgICAgcmVzb2x2ZToge1xuICAgICAgICBQcm9maWxlOiBmdW5jdGlvbihVc2VyKSB7XG4gICAgICAgICAgcmV0dXJuIFVzZXIucHJvZmlsZSgpO1xuICAgICAgICB9LFxuICAgICAgICBQcm9maWxlQnlJRDogZnVuY3Rpb24oVXNlciwgJHN0YXRlUGFyYW1zKXtcbiAgICAgICAgICByZXR1cm4gVXNlci5nZXRQcm9maWxlKCRzdGF0ZVBhcmFtcy51c2VySWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ3VzZXJzJywge1xuICAgICAgdXJsOiAnL3VzZXJzJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2h0bWwvdXNlcnMuaHRtbCcsXG4gICAgICBjb250cm9sbGVyOiAndXNlcnNDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdidXNpbmVzcycsIHtcbiAgICAgIHVybDogJy9idXNpbmVzcycsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9odG1sL2J1c2luZXNzLmh0bWwnLFxuICAgICAgY29udHJvbGxlcjogJ2J1c2luZXNzQ3RybCcsXG4gICAgICByZXNvbHZlOiB7XG4gICAgICAgIFByb2ZpbGU6IGZ1bmN0aW9uKFVzZXIpIHtcbiAgICAgICAgICByZXR1cm4gVXNlci5wcm9maWxlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnc2hvd0J1c2luZXNzJywge1xuICAgICAgdXJsOiAnL2J1c2luZXNzLzpidXNpbmVzc0lkJywgXG4gICAgICB0ZW1wbGF0ZVVybDogJ2h0bWwvc2hvd2J1c2luZXNzLmh0bWwnLCBcbiAgICAgIGNvbnRyb2xsZXI6ICdzaG93YnVzaW5lc3NDdHJsJywgICAgICBcbiAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgUHJvZmlsZTogZnVuY3Rpb24oVXNlcikge1xuICAgICAgICAgIHJldHVybiBVc2VyLnByb2ZpbGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgfSlcbiAgICBcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xufSk7XG5cbiIsIid1c2Ugc3RyaWN0JztcblxubGV0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdteUFwcCcpO1xuXG5hcHAuY29udHJvbGxlcignYnVzaW5lc3NDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBVc2VyLCAkcm9vdFNjb3BlLCBCdXNpbmVzcywgUHJvZmlsZSl7XG4gIGNvbnNvbGUubG9nKFwiYnVzaW5lc3NDdHJsXCIpO1xuXG4gICRzY29wZS5idXNpbmVzc2VzID0gW107XG4gIGNvbnNvbGUubG9nKFwiUHJvZmlsZTpcIiwgUHJvZmlsZSlcbiAgdmFyIGZhdm9yaXRlcyA9IFByb2ZpbGUuZmF2b3JpdGVzO1xuXG4gICRzY29wZS5zZWFyY2hCdXNpbmVzcyA9ICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiJHNjb3BlLm5ld0l0ZW0uc2VhcmNoUGFyYW1zXCIgLCAkc2NvcGUubmV3SXRlbS5zZWFyY2hQYXJhbXMpXG4gICAgICBCdXNpbmVzcy5zZWFyY2hZZWxwKCRzY29wZS5uZXdJdGVtLnNlYXJjaFBhcmFtcylcbiAgICAgIC50aGVuKHJlcyA9PntcbiAgICAgICAgY29uc29sZS5sb2coXCJyZXMgZnJvbSBzZWFyY2ggYnVzaW5zZXNzOlwiICwgcmVzKTtcbiAgICAgICAgZm9yKHZhciBpPTA7IGk8IGZhdm9yaXRlcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgY29uc29sZS5sb2cocmVzLmlkICxcIiB2cyBcIiwgZmF2b3JpdGVzW2ldKTtcbiAgICAgICAgICBpZihyZXMuaWQgPT09IGZhdm9yaXRlc1tpXSl7XG4gICAgICAgICAgICAkc2NvcGUudG9nZ2xlRmF2ZSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICRzY29wZS5idXNpbmVzc2VzLnB1c2gocmVzKTtcbiAgICAgIH0pICAgIFxuICAgICAgLmNhdGNoKGVyciA9PntcbiAgICAgICAgY29uc29sZS5sb2coXCJlcnIgaW4gYnVzaW5lc3NDdHJsOiBcIiwgZXJyKTtcbiAgICAgIH0pXG4gICAgfVxuXG4gICRzY29wZS5zZWFyY2hCdXNpbmVzczIgPSAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcInNlYXJjaFwiKTtcbiAgICAgIHZhciBzZWFyY2hCeSA9IHt9O1xuXG5cbiAgICAgIGlmKCRzY29wZS5uZXdJdGVtLmxvY2F0aW9uKXtcbiAgICAgICAgc2VhcmNoQnkubG9jYXRpb24gPSAkc2NvcGUubmV3SXRlbS5sb2NhdGlvblxuICAgICAgfVxuICAgICAgaWYoJHNjb3BlLm5ld0l0ZW0udGVybSl7XG4gICAgICAgIHNlYXJjaEJ5LnRlcm0gPSAkc2NvcGUubmV3SXRlbS50ZXJtO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJzZWFyY2hCeTpcIiwgc2VhcmNoQnkpO1xuXG4gICAgICBCdXNpbmVzcy5zZWFyY2hDYXRhZ29yaWVzKHNlYXJjaEJ5KVxuICAgICAgLnRoZW4ocmVzID0+e1xuICAgICAgICBjb25zb2xlLmxvZyhcInJlcyBmcm9tIHNlYXJjaCBidXNpbnNlc3M6XCIgLCByZXMuYnVzaW5lc3Nlcyk7XG4gICAgICAgICRzY29wZS50b2dnbGVGYXZlID0gbmV3IEFycmF5KHJlcy5idXNpbmVzc2VzLmxlbmd0aClcblxuICAgICAgICAvL2NoZWNrIGZvciBmYXZvcml0ZXNcbiAgICAgICAgZm9yKHZhciBrPTA7IGs8cmVzLmJ1c2luZXNzZXMubGVuZ3RoOyBrKyspe1xuICAgICAgICAgIGZvcih2YXIgaT0wOyBpPCBmYXZvcml0ZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgY29uc29sZS5sb2coKVxuICAgICAgICAgICAgaWYocmVzLmJ1c2luZXNzZXNba10uaWQgPT09IGZhdm9yaXRlc1tpXSl7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5idXNpbmVzc2VzW2tdLmlkLCBcIiB2cyBcIiwgZmF2b3JpdGVzW2ldKTtcbiAgICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZUZhdmVba10gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSAkc2NvcGUudG9nZ2xlRmF2ZVtrXSA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgICRzY29wZS5idXNpbmVzc2VzID0gcmVzLmJ1c2luZXNzZXM7XG5cbiAgICAgIH0pICAgIFxuICAgICAgLmNhdGNoKGVyciA9PntcbiAgICAgICAgY29uc29sZS5sb2coXCJlcnIgaW4gYnVzaW5lc3NDdHJsOiBcIiwgZXJyKTtcbiAgICAgIH0pXG4gICAgfVxuXG5cbiAgICAvL2FkZCB0byB1c2VyIGZhdm9yaXRlc1xuICAgICRzY29wZS5mYXZvcml0ZSA9IChpbmRleCk9PntcbiAgICAgIGNvbnNvbGUubG9nKFwiaW5kZXg6IFwiLCBpbmRleCk7XG5cbiAgICAgICRzY29wZS50b2dnbGVGYXZlW2luZGV4XSA9ICEkc2NvcGUudG9nZ2xlRmF2ZVtpbmRleF07XG4gICAgICBjb25zb2xlLmxvZyhcIiRzY29wZS5idXNpbmVzc2VzW2luZGV4XS5pZFwiLCAkc2NvcGUuYnVzaW5lc3Nlc1tpbmRleF0uaWQpXG4gICAgICBVc2VyLmFkZEZhdm9yaXRlVG9Vc2VyKCBQcm9maWxlLl9pZCwgJHNjb3BlLmJ1c2luZXNzZXNbaW5kZXhdLmlkKVxuICAgICAgLnRoZW4oQnVzaW5lc3MuYWRkRmF2b3JpdGUoJHNjb3BlLmJ1c2luZXNzZXNbaW5kZXhdLCBQcm9maWxlLl9pZCkpXG4gICAgICAudGhlbihyZXMgPT57XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVzOlwiICwgcmVzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+e1xuICAgICAgICBjb25zb2xlLmxvZyhcImVyciBpbiBidXNpbmVzc0N0cmw6IFwiLCBlcnIpO1xuICAgICAgfSkgICAgXG4gICAgICBjb25zb2xlLmxvZyhcIiRzY29wZS5idXNpbmVzc2VzW2luZGV4XTpcIiwgJHNjb3BlLmJ1c2luZXNzZXNbaW5kZXhdLmlkKTtcbiAgICAgIC8qICAgICBcbiAgICAgIC50aGVuKHJlcyA9PntcbiAgICAgICAgY29uc29sZS5sb2coXCJyZXM6XCIgLCByZXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT57XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZXJyIGluIGJ1c2luZXNzQ3RybDogXCIsIGVycik7XG4gICAgICB9KSovXG4gICAgfVxuXG4gICAgJHNjb3BlLnVuRmF2b3JpdGUgPSAoaW5kZXgpPT57XG4gICAgICAkc2NvcGUudG9nZ2xlRmF2ZVtpbmRleF0gPSAhJHNjb3BlLnRvZ2dsZUZhdmVbaW5kZXhdO1xuICAgICAgY29uc29sZS5sb2coXCIkc2NvcGUuYnVzaW5lc3Nlc1tpbmRleF0uaWRcIiwgJHNjb3BlLmJ1c2luZXNzZXNbaW5kZXhdLmlkKVxuICAgICAgVXNlci5yZW1vdmVGYXZvcml0ZWZyb21Vc2VyKCBQcm9maWxlLl9pZCwgJHNjb3BlLmJ1c2luZXNzZXNbaW5kZXhdLmlkKVxuICAgICAgLy8udGhlbihCdXNpbmVzcy5yZW1vdmVGYXZvcml0ZSgkc2NvcGUuYnVzaW5lc3Nlc1tpbmRleF0sIFByb2ZpbGUuX2lkKSlcbiAgICAgIC50aGVuKHJlcyA9PntcbiAgICAgICAgY29uc29sZS5sb2coXCJyZXM6XCIgLCByZXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT57XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZXJyIGluIGJ1c2luZXNzQ3RybDogXCIsIGVycik7XG4gICAgICB9KSAgICBcbiAgICAgIGNvbnNvbGUubG9nKFwiJHNjb3BlLmJ1c2luZXNzZXNbaW5kZXhdOlwiLCAkc2NvcGUuYnVzaW5lc3Nlc1tpbmRleF0uaWQpO1xuICAgIH1cblxufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5sZXQgYXBwID0gYW5ndWxhci5tb2R1bGUoJ215QXBwJyk7XG5cbmFwcC5jb250cm9sbGVyKCdpbWFnZUN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIFVwbG9hZCwgUHJvZmlsZSwgJHJvb3RTY29wZSkge1xuICBjb25zb2xlLmxvZyhcImltYWdlIGN0cmxcIik7XG5cblxuICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyID0gUHJvZmlsZTtcblxuICAkc2NvcGUuc3VibWl0ID0gKCkgPT57XG4gICAgY29uc29sZS5sb2coJ3N1Ym1pdCcpO1xuICAgIGNvbnNvbGUubG9nKCckc2NvcGUuZmlsZTonLCAkc2NvcGUuZmlsZSk7XG4gICAgXG4gICAgVXBsb2FkLnVwbG9hZCh7XG4gICAgICB1cmw6ICcvYXBpL2ltYWdlcycsXG4gICAgICBkYXRhOiB7cGhvdG86ICRzY29wZS5maWxlLCB1c2VyOiAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyLl9pZH0gLy9hbnl0aGluZyBlbHNlIGxpa2UgbmFtZSB3aWxsIGVuZCB1cCBpbiByZXEuYm9keVxuICAgIH0pXG4gICAgLnRoZW4ocmVzID0+e1xuICAgICAgY29uc29sZS5sb2coJ3JlczogJywgcmVzKTtcbiAgICAgICRzY29wZS5zYXZlZEltYWdlID0gcmVzLmRhdGE7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+e1xuICAgICAgY29uc29sZS5sb2coXCJlcnI6XCIsIGVycilcbiAgICB9KVxuICB9O1xuXG59KTtcblxuICAvKiRzY29wZS5jcnVkcyA9IFtdO1xuXG4gIENydWQuZ2V0QWxsKClcbiAgLnRoZW4ocmVzID0+e1xuICAgICRzY29wZS5jcnVkcyA9IHJlcy5kYXRhO1xuICAgIGNvbnNvbGUubG9nKFwiJHNjb3BlLmNydWRzOlwiLCAkc2NvcGUuY3J1ZHMpO1xuICB9KVxuICAuY2F0Y2goZXJyID0+e1xuICAgIGNvbnNvbGUubG9nKFwiZXJyOiBcIiwgZXJyKTtcbiAgfSlcblxuICAkc2NvcGUuYWRkQ3J1ZCA9ICgpID0+e1xuICAgIENydWQuYWRkQ3J1ZCgkc2NvcGUubmV3SXRlbSlcbiAgICAudGhlbihjcnVkID0+e1xuICAgICAgJHNjb3BlLmNydWRzLnB1c2goY3J1ZCk7XG4gICAgICAkc2NvcGUubmV3SXRlbSA9IHt9O1xuICAgIH0pXG4gICAgLmNhdGNoKGVycj0+e1xuICAgICAgY29uc29sZS5sb2coXCJlcnJvcjogXCIsIGVyciApO1xuICAgIH0pO1xuICB9XG5cblxuICAkc2NvcGUuZGVsZXRlQ3J1ZCA9IChpbmQsIGNydWQpID0+e1xuICAgIGNvbnNvbGUubG9nKFwiY3J1ZDpcIiwgY3J1ZClcbiAgICBDcnVkLmRlbGV0ZUNydWQoY3J1ZC5faWQpXG4gICAgLnRoZW4oY3J1ZCA9PiB7XG4gICAgICAkc2NvcGUuY3J1ZHMuc3BsaWNlKGluZCwxKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnI9PntcbiAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3I6IFwiLCBlcnIgKTtcbiAgICB9KTtcbiAgfVxuXG4gICRzY29wZS5zaG93VXBkYXRlRm9ybSA9IChpbmRleCwgY3J1ZCkgPT57XG4gICAgY29uc29sZS5sb2coXCJpbmRleDogXCIsIGluZGV4KTtcbiAgICBjb25zb2xlLmxvZyhcImNydWQ6IFwiLCBjcnVkKTtcbiAgICAkc2NvcGUuc2hvd1VwZGF0ZSA9dHJ1ZTtcbiAgICAkc2NvcGUudXBkYXRlSXRlbSA9IGNydWQ7XG4gICAgJHNjb3BlLnVwZGF0ZUluZGV4ID0gaW5kZXg7XG4gIH1cblxuICAkc2NvcGUudXBkYXRlQ3J1ZD0gKCkgPT57XG4gICAgJHNjb3BlLnNob3dVcGRhdGUgPWZhbHNlO1xuICAgIENydWQudXBkYXRlQ3J1ZCgkc2NvcGUudXBkYXRlSXRlbS5faWQsICRzY29wZS51cGRhdGVJdGVtKVxuICAgIC50aGVuKGNydWQgPT57XG4gICAgICBjb25zb2xlLmxvZyhcInVwZGF0ZSBhcHQ6XCIgLCAkc2NvcGUudXBkYXRlSXRlbS5faWQsIFwiICwgXCIgLCAkc2NvcGUudXBkYXRlSXRlbSk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyPT57XG4gICAgICBjb25zb2xlLmxvZyhcImVycm9yOiBcIiwgZXJyICk7XG4gICAgfSk7XG4gIH1cbiovXG5cbiIsIlxuJ3VzZSBzdHJpY3QnO1xuXG5sZXQgYXBwID0gYW5ndWxhci5tb2R1bGUoJ215QXBwJyk7XG5cbmFwcC5jb250cm9sbGVyKCdsb2dpbkN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgJGF1dGgsICRyb290U2NvcGUpIHtcbiAgY29uc29sZS5sb2coJ2xvZ2luQ3RybCEnKTtcblxuICAkc2NvcGUubG9naW4gPSAoKSA9PiB7XG4gICAgICAkYXV0aC5sb2dpbigkc2NvcGUudXNlcilcbiAgICAgIC50aGVuKHJlcyA9PntcbiAgICAgICAgY29uc29sZS5sb2coXCJyZXM6IFwiLCByZXMpO1xuICAgICAgICAvLyRyb290U2NvcGUuY3VycmVudFVzZXIgPSByZXMuZGF0YTtcbiAgICAgICAgJHN0YXRlLmdvKCdwcm9maWxlJyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PntcbiAgICAgICAgY29uc29sZS5sb2coXCJlcnI6XCIsIGVycik7XG4gICAgICB9KVxuICAgIH07XG59KTsiLCIndXNlIHN0cmljdCc7XG5cbmxldCBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnKTtcblxuYXBwLmNvbnRyb2xsZXIoJ21haW5DdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsICRhdXRoLCAkcm9vdFNjb3BlKSB7XG4gIGNvbnNvbGUubG9nKCdtYWluQ3RybCEnKTtcblxuICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyO1xuXG4gICRzY29wZS5pc0F1dGhlbnRpY2F0ZWQgPSAoKSA9PiAkYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKTtcblxuICAkc2NvcGUubG9nb3V0ID0gKCkgPT4ge1xuICAgICRhdXRoLmxvZ291dCgpO1xuICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICB9O1xuXG4gICRzY29wZS5hdXRoZW50aWNhdGUgPSBwcm92aWRlciA9PiB7XG4gICAgJGF1dGguYXV0aGVudGljYXRlKHByb3ZpZGVyKVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnI6JywgZXJyKTtcbiAgICAgIH0pXG4gIH07XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcblxubGV0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdteUFwcCcpO1xuXG5hcHAuY29udHJvbGxlcigncHJvZmlsZUN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIFByb2ZpbGUsIFByb2ZpbGVCeUlELCAkc3RhdGUsIFVzZXIsICRyb290U2NvcGUsIFdhbGxQb3N0KSB7XG4gIFxuICBjb25zb2xlLmxvZygncHJvZmlsZUN0cmwhJyk7XG5cbiAgJHJvb3RTY29wZS5jdXJyZW50VXNlciA9IFByb2ZpbGU7XG5cbiAgJHNjb3BlLnVzZXIgPSBQcm9maWxlQnlJRCB8fCBQcm9maWxlO1xuXG4gIFdhbGxQb3N0LmdldFdhbGxQb3N0cygkc2NvcGUudXNlci5faWQpXG4gICAgLnRoZW4ocmVzID0+e1xuICAgICRzY29wZS51c2VyV2FsbHBvc3RzID0gcmVzO1xuICB9KVxuXG4gIGNvbnNvbGUubG9nKFwidXNlcjpcIiwgJHNjb3BlLnVzZXIgKTtcbiAgY29uc29sZS5sb2coXCJjdXJydXNlcjpcIiwgJHJvb3RTY29wZS5jdXJyZW50VXNlciApO1xuXG4gICRzY29wZS5zaG93ZGlzcGxheU5hbWVGb3JtID0gKCkgPT57XG4gICAgY29uc29sZS5sb2coXCJzaG93IGZvcm1cIik7XG4gICAgJHNjb3BlLmRpc3BsYXlOYW1lRm9ybSA9IHRydWU7XG4gIH1cblxuICAkc2NvcGUudXBkYXRlZGlzcGxheU5hbWUgPSAoKSA9PiB7XG4gICAgJHNjb3BlLmRpc3BsYXlOYW1lRm9ybSA9IGZhbHNlO1xuICAgICRzY29wZS51c2VyLmRpc3BsYXlOYW1lID0gJHNjb3BlLm5ld0l0ZW0uZGlzcGxheU5hbWU7XG4gICAgVXNlci51cGRhdGVQcm9maWxlKCRzY29wZS51c2VyLl9pZCwgJHNjb3BlLm5ld0l0ZW0pXG4gICAgICAudGhlbihwcm9maWxlID0+e1xuICAgICAgICBjb25zb2xlLmxvZyhcInByb2ZpbGU6XCIsIHByb2ZpbGUpO1xuICAgICAgICAkc2NvcGUubmV3SXRlbS5kaXNwbGF5TmFtZSA9ICcnO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT57XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZXJyOlwiLCBlcnIpO1xuICAgICAgfSlcbiAgfVxuXG4gICRzY29wZS5jYW5jZWxkaXNwbGF5TmFtZSA9ICgpID0+e1xuICAgICRzY29wZS51c2VybmFtZUZvcm0gPSB0cnVlO1xuICAgICRzY29wZS5uZXdJdGVtLmRpc3BsYXlOYW1lID0gJyc7XG4gIH1cblxuLy9waG90b1xuICAkc2NvcGUuc2hvd1BpY3R1cmVGb3JtID0gKCkgPT57XG4gICAgY29uc29sZS5sb2coXCJzaG93IGZvcm1cIik7XG4gICAgJHNjb3BlLnBob3RvRm9ybSA9IHRydWU7XG4gIH1cblxuICAkc2NvcGUudXBkYXRlUGljdHVyZSA9ICgpID0+IHtcbiAgICAkc2NvcGUucGhvdG9Gb3JtID0gZmFsc2U7XG4gICAgY29uc29sZS5sb2coXCIkc3RhdGUuY3VycmVudDogXCIsICRzdGF0ZS5jdXJyZW50KTtcbiAgICAkc2NvcGUudXNlci5wcm9maWxlSW1hZ2UgPSAkc2NvcGUubmV3SXRlbS5wcm9maWxlSW1hZ2U7XG4gICAgY29uc29sZS5sb2coXCIkc2NvcGUubmV3SXRlbTpcIiwgJHNjb3BlLm5ld0l0ZW0pO1xuICAgIFVzZXIudXBkYXRlUHJvZmlsZSgkc2NvcGUudXNlci5faWQsICRzY29wZS5uZXdJdGVtKVxuICAgICAgLnRoZW4ocHJvZmlsZSA9PntcbiAgICAgICAgY29uc29sZS5sb2coXCJwcm9maWxlOlwiLCBwcm9maWxlKTtcbiAgICAgICAgJHNjb3BlLm5ld0l0ZW0ucHJvZmlsZUltYWdlID0gJyc7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PntcbiAgICAgICAgY29uc29sZS5sb2coXCJlcnI6XCIsIGVycik7XG4gICAgICB9KVxuICB9XG5cbiAgJHNjb3BlLmNhbmNlbFBob3RvVXJsID0gKCkgPT57XG4gICAgJHNjb3BlLnBob3RvRm9ybSA9IHRydWU7XG4gICAgJHNjb3BlLm5ld0l0ZW0ucGhvdG9VcmwgPSAnJztcbiAgfVxuXG5cbiAgJHNjb3BlLmRlbGV0ZUFjY291bnQgPSAodXNlcikgPT57XG4gICAgLy9hZGQgc3dhbFxuICAgIGNvbnNvbGUubG9nKHVzZXIuX2lkKTtcbiAgICBVc2VyLmRlbGV0ZUFjY291bnQodXNlci5faWQpXG4gICAgICAudGhlbigpXG4gICAgICAuY2F0Y2goZXJyID0+e1xuICAgICAgICBjb25zb2xlLmxvZyhcImVycjogXCIsIGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gICAgJHNjb3BlLnN1Ym1pdE1lc3NhZ2UgPSAoKSA9PntcblxuICAgIHZhciBwb3N0T2JqID0ge1xuICAgICAgdG86ICRzY29wZS51c2VyLFxuICAgICAgZnJvbTogJHJvb3RTY29wZS5jdXJyZW50VXNlci5faWQsXG4gICAgICBmcm9tTmFtZTogJHJvb3RTY29wZS5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSxcbiAgICAgIHRleHQ6ICRzY29wZS5uZXdJdGVtLnRleHQsXG4gICAgICBjcmVhdGVkQXQ6IFwiYWRkIG1vbWVudFwiXG4gICAgfTtcblxuICAgIGNvbnNvbGUubG9nKFwicG9zdCBvYmo6XCIsIHBvc3RPYmopO1xuXG5cbiAgICBXYWxsUG9zdC5hZGRXYWxsUG9zdChwb3N0T2JqKVxuICAgICAgLnRoZW4od2FsbHBvc3QgPT57XG4gICAgICAgIGNvbnNvbGUubG9nKFwid2FsbHBvc3Q6XCIgLCB3YWxscG9zdCk7XG4gICAgICAgIFVzZXIuYWRkV2FsbFBvc3RUb1VzZXIoUHJvZmlsZUJ5SUQuX2lkLCB3YWxscG9zdC5faWQpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKCRzdGF0ZS5nbygkc3RhdGUuJGN1cnJlbnQsIG51bGwsIHsgcmVsb2FkOiB0cnVlIH0pKVxuICAgICAgLmNhdGNoKGVyciA9PntcbiAgICAgICAgY29uc29sZS5sb2coXCJlcnI6IFwiLCBlcnIpO1xuICAgICAgfSlcbiAgIH07XG5cblxufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5sZXQgYXBwID0gYW5ndWxhci5tb2R1bGUoJ215QXBwJyk7XG5cbmFwcC5jb250cm9sbGVyKCdyZWdpc3RlckN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgJGF1dGgpIHtcbiAgY29uc29sZS5sb2coJ3JlZ2lzdGVyQ3RybCEnKTtcblxuICAkc2NvcGUucmVnaXN0ZXIgPSAoKSA9PiB7XG4gICAgaWYoJHNjb3BlLnVzZXIucGFzc3dvcmQgIT09ICRzY29wZS51c2VyLnBhc3N3b3JkMil7XG4gICAgICAkc2NvcGUudXNlci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAkc2NvcGUudXNlci5wYXNzd29yZDIgPSBudWxsO1xuICAgICAgYWxlcnQoJ1Bhc3N3b3JkcyBtdXN0IG1hdGNoIScpO1xuICAgIH1lbHNle1xuICAgICAgJGF1dGguc2lnbnVwKCRzY29wZS51c2VyKVxuICAgICAgLnRoZW4ocmVzID0+e1xuICAgICAgICBjb25zb2xlLmxvZyhcInJlczogXCIsIHJlcyk7XG4gICAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+e1xuICAgICAgICBjb25zb2xlLmxvZyhcImVycjpcIiwgZXJyKTtcbiAgICAgIH0pXG4gICAgfVxuICB9O1xufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5sZXQgYXBwID0gYW5ndWxhci5tb2R1bGUoJ215QXBwJyk7XG5cblxuYXBwLmNvbnRyb2xsZXIoJ3Nob3didXNpbmVzc0N0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZVBhcmFtcywgQnVzaW5lc3MsIFByb2ZpbGUsIFVzZXIpIHtcbiAgY29uc29sZS5sb2coJ3Nob3didXNpbmVzc0N0cmwhJyk7XG5cbiAgJHNjb3BlLnNob3dCdXR0b24gPSBmYWxzZTtcbiAgJHNjb3BlLnNpbmdsZXRvZ2dsZUZhdmUgPSBmYWxzZTtcbiAgdmFyIGZhdm9yaXRlcyA9IFByb2ZpbGUuZmF2b3JpdGVzO1xuICAvL2NvbnNvbGUubG9nKFwiZmF2ZXM6IFwiLCBmYXZvcml0ZXMpO1xuXG4gIGxldCBidXNpbmVzc0lkID0gJHN0YXRlUGFyYW1zO1xuICBjb25zb2xlLmxvZyhcImJ1c2luZXNzSWRcIiwgYnVzaW5lc3NJZC5idXNpbmVzc0lkKTtcblxuICBCdXNpbmVzcy5zZWFyY2hZZWxwKGJ1c2luZXNzSWQuYnVzaW5lc3NJZClcbiAgLnRoZW4ocmVzID0+e1xuICAgIGNvbnNvbGUubG9nKFwicmVzOlwiICwgcmVzKTtcbiAgICAkc2NvcGUuYnVzaW5lc3MgPSByZXM7XG4gICAgY29uc29sZS5sb2coXCJyZWRJRDpcIiwgcmVzLmlkKTtcbiAgICBjb25zb2xlLmxvZyhcImZhdmVzXCIgLCBmYXZvcml0ZXMpO1xuICAgICRzY29wZS5zaG93QnV0dG9uID0gdHJ1ZTtcbiAgICBmb3IodmFyIGkgPTA7IGk8IGZhdm9yaXRlcy5sZW5ndGg7IGkrKyl7XG4gICAgICBjb25zb2xlLmxvZyhmYXZvcml0ZXNbaV0sIFwiIHZzIFwiLCByZXMuaWQpO1xuICAgICAgaWYoZmF2b3JpdGVzW2ldID09PSByZXMuaWQpe1xuICAgICAgICAkc2NvcGUuc2luZ2xldG9nZ2xlRmF2ZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9KSAgIFxuICAuY2F0Y2goZXJyID0+e1xuICAgIGNvbnNvbGUubG9nKFwiZXJyIGluIGJ1c2luZXNzQ3RybDogXCIsIGVycik7XG4gIH0pXG5cbiAgJHNjb3BlLmZhdm9yaXRlID0gKCk9PntcbiAgICAgICRzY29wZS5zaW5nbGV0b2dnbGVGYXZlID0gISRzY29wZS5zaW5nbGV0b2dnbGVGYXZlO1xuICAgICAgY29uc29sZS5sb2coXCIkc2NvcGUuYnVzaW5lc3MuaWRcIiwgJHNjb3BlLmJ1c2luZXNzLmlkKVxuICAgICAgVXNlci5hZGRGYXZvcml0ZVRvVXNlciggUHJvZmlsZS5faWQsICRzY29wZS5idXNpbmVzcy5pZClcbiAgICAgIC50aGVuKEJ1c2luZXNzLmFkZEZhdm9yaXRlKCRzY29wZS5idXNpbmVzcywgUHJvZmlsZS5faWQpKVxuICAgICAgLnRoZW4ocmVzID0+e1xuICAgICAgICBjb25zb2xlLmxvZyhcInJlczpcIiAsIHJlcyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PntcbiAgICAgICAgY29uc29sZS5sb2coXCJlcnIgaW4gYnVzaW5lc3NDdHJsOiBcIiwgZXJyKTtcbiAgICAgIH0pICAgIFxuICAgICAgY29uc29sZS5sb2coXCIkc2NvcGUuYnVzaW5lc3M6XCIsICRzY29wZS5idXNpbmVzcy5pZCk7XG4gICAgfVxuXG5cbiAgICAkc2NvcGUudW5GYXZvcml0ZSA9ICgpPT57XG4gICAgICAkc2NvcGUuc2luZ2xldG9nZ2xlRmF2ZSA9ICEkc2NvcGUuc2luZ2xldG9nZ2xlRmF2ZTtcbiAgICAgIGNvbnNvbGUubG9nKFwiJHNjb3BlLmJ1c2luZXNzZXNbaW5kZXhdLmlkXCIsICRzY29wZS5idXNpbmVzcy5pZClcbiAgICAgIFVzZXIucmVtb3ZlRmF2b3JpdGVmcm9tVXNlciggUHJvZmlsZS5faWQsICRzY29wZS5idXNpbmVzcy5pZClcbiAgICAgIC8vLnRoZW4oQnVzaW5lc3MucmVtb3ZlRmF2b3JpdGUoJHNjb3BlLmJ1c2luZXNzZXNbaW5kZXhdLCBQcm9maWxlLl9pZCkpXG4gICAgICAudGhlbihyZXMgPT57XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVzOlwiICwgcmVzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+e1xuICAgICAgICBjb25zb2xlLmxvZyhcImVyciBpbiBidXNpbmVzc0N0cmw6IFwiLCBlcnIpO1xuICAgICAgfSkgICAgXG4gICAgICBjb25zb2xlLmxvZyhcIiRzY29wZS5idXNpbmVzc2VzW2luZGV4XTpcIiwgJHNjb3BlLmJ1c2luZXNzLmlkKTtcbiAgICB9XG5cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ215QXBwJyk7XG5cbmFwcC5jb250cm9sbGVyKCd1c2Vyc0N0cmwnLCBmdW5jdGlvbigkc2NvcGUsICQkc3RhdGUsICRzdGF0ZSwgVXNlcikge1xuICBjb25zb2xlLmxvZygndXNlcnNDdHJsIScpO1xuXG4gIHZhciB1c2VyUHJvbWlzZSA9IFVzZXIuZ2V0QWxsKCk7XG4gIGNvbnNvbGUubG9nKFwidXNlclByb21pc2U6XCIsIHVzZXJQcm9taXNlKTtcbiAgdXNlclByb21pc2UudGhlbihcbiAgICBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQuZGF0YSk7XG4gICAgICAgJHNjb3BlLnVzZXJGZWVkID0gcmVzdWx0LmRhdGE7XG4gICAgfSk7XG59KTsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnKTtcblxuYXBwLnNlcnZpY2UoJ0J1c2luZXNzJywgZnVuY3Rpb24oJGh0dHAsICRxKXtcblxuICB0aGlzLmdldE1hcCA9IChjb3JkcykgPT57XG4gICAgY29uc29sZS5sb2coXCJjb3JkcyBpbiBzZXJ2aWNlOlwiICwgY29yZHMpO1xuICAgIHJldHVybiAkaHR0cC5nZXQoYC9hcGkvYnVzaW5lc3Nlcy9tYXBgLCBjb3JkcylcbiAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcInJlcy5kYXRhIGluIHNlcnZpY2VzOlwiLCByZXMuZGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVzIGluIHNlcnZpY2VzOlwiLCByZXMpO1xuICAgICAgICByZXR1cm4gJHEucmVzb2x2ZShyZXMuZGF0YSk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IHsgICBcbiAgICAgICAgY29uc29sZS5sb2coJ2VycjonLCBlcnIpO1xuICAgIH0pXG4gIH1cblxuICB0aGlzLnNlYXJjaFllbHAgPSAoc2VhcmNoKSA9PntcbiAgICBjb25zb2xlLmxvZyhcInNlYXJjaDogXCIsIHNlYXJjaCk7XG4gICAgcmV0dXJuICRodHRwLmdldChgL2FwaS9idXNpbmVzc2VzL3llbHAvJHtzZWFyY2h9YClcbiAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJyZXMuZGF0YSBpbiBzZXJ2aWNlczpcIiwgcmVzLmRhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZyhcInJlcyBpbiBzZXJ2aWNlczpcIiwgcmVzKTtcbiAgICAgICAgcmV0dXJuICRxLnJlc29sdmUocmVzLmRhdGEpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT4geyAgIFxuICAgICAgICBjb25zb2xlLmxvZygnZXJyOicsIGVycik7XG4gICAgICB9KVxuICB9XG5cbiAgdGhpcy5zZWFyY2hDYXRhZ29yaWVzID0gKGlucHV0cykgPT57XG4gICAgY29uc29sZS5sb2coXCJpbnB1dHNcIiwgaW5wdXRzKTtcbiAgICByZXR1cm4gJGh0dHAucG9zdChgL2FwaS9idXNpbmVzc2VzL3llbHAveWVscENhdGFnb3JpZXNgLCBpbnB1dHMpXG4gICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVzLmRhdGEgaW4gc2VydmljZXM6XCIsIHJlcy5kYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJyZXMgaW4gc2VydmljZXM6XCIsIHJlcyk7XG4gICAgICAgIHJldHVybiAkcS5yZXNvbHZlKHJlcy5kYXRhKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IHsgICBcbiAgICAgICAgY29uc29sZS5sb2coJ2VycjonLCBlcnIpO1xuICAgICAgfSlcbiAgfVxuXG4gIHRoaXMuYWRkRmF2b3JpdGUgPSAoYnVzaW5lc3NPYmosIHVzZXJJZCkgPT57XG4gICAgY29uc29sZS5sb2coXCJidXNpbmVzc09iajpcIiwgYnVzaW5lc3NPYmopO1xuICAgIHJldHVybiAkaHR0cC5wb3N0KGAvYXBpL2J1c2luZXNzZXMvJHt1c2VySWR9YCwgYnVzaW5lc3NPYmopXG4gICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJyZXMgbG4gMjQgYnVzaW5lc3Mgc2VydmljZXM6XCIsIHJlcyk7XG4gICAgICAgIHJldHVybiAkcS5yZXNvbHZlKHJlcyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiB7ICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnI6JywgZXJyKTtcbiAgICAgIH0pXG4gICAgfTtcbn0pO1xuXG4vL2RvIGZpbmQsIGlmIG5vdCBpbiBkYiB0aGVuIGFkZCwgaWYgaW4gZGIgYWRkIHVzZXIgdG8gZmF2b3JpdGVkIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ215QXBwJyk7XG5cbmFwcC5zZXJ2aWNlKCdpbWFnZScsIGZ1bmN0aW9uKCRodHRwLCAkcSl7XG5cbiAgdGhpcy5nZXRBbGwgPSAoKSA9PntcbiAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NydWRzJyk7XG4gIH1cblxuICB0aGlzLmdldEJ5SWQgPSBpZCA9PntcbiAgICByZXR1cm4gJGh0dHAuZ2V0KGAvYXBpL2NydWRzLyR7aWR9YCk7XG4gIH1cblxuICB0aGlzLmFkZENydWQ9IChjcnVkKSA9PntcbiAgICByZXR1cm4gJGh0dHAucG9zdChgL2FwaS9jcnVkc2AsIGNydWQpXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICByZXR1cm4gJHEucmVzb2x2ZShyZXMuZGF0YSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiB7ICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnI6JywgZXJyKTtcbiAgICAgIH0pXG4gICAgfTtcblxuICB0aGlzLmRlbGV0ZUNydWQgPSAoaWQpID0+e1xuICAgIHJldHVybiAkaHR0cC5kZWxldGUoYC9hcGkvY3J1ZHMvJHtpZH1gKVxuICAgICAgLnRoZW4oICgpID0+IHtcbiAgICAgICAgcmV0dXJuICRxLnJlc29sdmUoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IHsgICBcbiAgICAgICAgY29uc29sZS5sb2coJ2VycjonLCBlcnIpO1xuICAgICAgfSlcbiAgICB9O1xuXG4gIHRoaXMudXBkYXRlQ3J1ZCA9IChpZCwgY3J1ZCkgPT57XG4gICAgICByZXR1cm4gJGh0dHAucHV0KGAvYXBpL2NydWRzLyR7aWR9YCwgY3J1ZClcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIHJldHVybiAkcS5yZXNvbHZlKGNydWQpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT4geyAgIFxuICAgICAgICBjb25zb2xlLmxvZygnZXJyOicsIGVycik7XG4gICAgICB9KVxuICAgIH07XG5cbn0pO1xuXG4vL2luIHJlc2lkZW50cyBSZXNpZGVudC5nZXRBbGwoKVxuLy8gICAgICAgICAgICAgICAgLnRoZW4ocmVzaWRlbnRzID0+e30pIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ215QXBwJyk7XG5cbmFwcC5zZXJ2aWNlKCdVc2VyJywgZnVuY3Rpb24oJGh0dHAsICRxKSB7XG5cbiAgdGhpcy5wcm9maWxlID0gKCkgPT4ge1xuICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlcnMvcHJvZmlsZScpXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICByZXR1cm4gJHEucmVzb2x2ZShyZXMuZGF0YSk7XG4gICAgICB9KTtcbiAgfTtcblxuICB0aGlzLmdldFByb2ZpbGUgPSAoaWQpID0+e1xuICAgICByZXR1cm4gJGh0dHAuZ2V0KGAvYXBpL3VzZXJzL3Byb2ZpbGUvJHtpZH1gKVxuICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIHJldHVybiAkcS5yZXNvbHZlKHJlcy5kYXRhKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT57XG4gICAgICBjb25zb2xlLmxvZyhcImVycjpcIiwgZXJyKTtcbiAgICB9KTtcbiAgfVxuXG4gIHRoaXMuZ2V0QWxsID0gKCkgPT57XG4gICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VycycpO1xuICB9XG5cbiAgdGhpcy51cGRhdGVQcm9maWxlID0gKGlkLCBwcm9maWxlT2JqKSA9PntcbiAgICBjb25zb2xlLmxvZyhcImhlcmVcIik7XG4gICAgY29uc29sZS5sb2coaWQgLCBcIiBcIiAscHJvZmlsZU9iaik7XG4gICAgcmV0dXJuICRodHRwLnB1dChgL2FwaS91c2Vycy9wcm9maWxlLyR7aWR9YCwgIHByb2ZpbGVPYmopXG4gICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgcmV0dXJuICRxLnJlc29sdmUoKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT57XG4gICAgICBjb25zb2xlLmxvZyhcImVycjpcIiwgZXJyKTtcbiAgICB9KTtcbiAgfVxuXG4gIHRoaXMuZGVsZXRlQWNjb3VudCA9IChpZCkgPT57XG4gICAgcmV0dXJuICRodHRwLmRlbGV0ZShgL2FwaS91c2Vycy9wcm9maWxlLyR7aWR9YClcbiAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICByZXR1cm4gJHEucmVzb2x2ZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PntcbiAgICAgIGNvbnNvbGUubG9nKFwiZXJyOlwiLCBlcnIpO1xuICAgIH0pO1xuICB9XG5cbiAgdGhpcy5hZGRGYXZvcml0ZVRvVXNlciA9IChpZCwgeWVscElkKSA9PntcbiAgICAvL2NvbnNvbGUubG9nKFwiYWRkRmF2b3JpdGVUb1VzZXJcIiwgXCJpZDpcIiwgaWQsIFwieWVscElkXCIsIHllbHBJZClcbiAgICByZXR1cm4gJGh0dHAucHV0KGAvYXBpL3VzZXJzL3Byb2ZpbGUvJHtpZH0vYWRkLyR7eWVscElkfWApXG4gICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJyZXMgbG4gNTM6XCIsIHJlcyk7XG4gICAgICAgIHJldHVybiAkcS5yZXNvbHZlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+e1xuICAgICAgY29uc29sZS5sb2coXCJlcnI6XCIsIGVycik7XG4gICAgfSk7XG4gIH1cblxuICB0aGlzLnJlbW92ZUZhdm9yaXRlZnJvbVVzZXIgPSAoaWQsIHllbHBJZCkgPT57XG4gICAgY29uc29sZS5sb2coXCJyZW1vdmUgRmF2b3JpdGVcIiwgXCJpZDpcIiwgaWQsIFwieWVscElkXCIsIHllbHBJZClcbiAgICByZXR1cm4gJGh0dHAucHV0KGAvYXBpL3VzZXJzL3Byb2ZpbGUvJHtpZH0vcmVtb3ZlLyR7eWVscElkfWApXG4gICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVzIGxuIDUzOlwiLCByZXMpO1xuICAgICAgICByZXR1cm4gJHEucmVzb2x2ZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PntcbiAgICAgIGNvbnNvbGUubG9nKFwiZXJyOlwiLCBlcnIpO1xuICAgIH0pO1xuICB9XG4gXG5cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ215QXBwJyk7XG5cbmFwcC5zZXJ2aWNlKCdXYWxsUG9zdCcsIGZ1bmN0aW9uKCRodHRwLCAkcSkge1xuXG4gICAgdGhpcy5hZGRXYWxsUG9zdD0gKHdhbGxwb3N0KSA9PntcbiAgICBjb25zb2xlLmxvZyhcImluIGFkZCB3YWxscG9zdDogXCIsIHdhbGxwb3N0KTtcbiAgICByZXR1cm4gJGh0dHAucG9zdChgL2FwaS93YWxscG9zdHNgLCB3YWxscG9zdClcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIHJldHVybiAkcS5yZXNvbHZlKHJlcy5kYXRhKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IHsgICBcbiAgICAgICAgY29uc29sZS5sb2coJ2VycjonLCBlcnIpO1xuICAgICAgfSlcbiAgICB9O1xuXG5cbiAgICB0aGlzLmdldFdhbGxQb3N0cyA9ICh1c2VySWQpID0+e1xuICAgIHJldHVybiAkaHR0cC5nZXQoYC9hcGkvd2FsbHBvc3RzLyR7dXNlcklkfWApXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICByZXR1cm4gJHEucmVzb2x2ZShyZXMuZGF0YSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVycj0+e1xuICAgICAgICBjb25zb2xlLmxvZyhcImVycjogXCIsIGVycik7XG4gICAgICB9KTtcbiAgfTtcblxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
